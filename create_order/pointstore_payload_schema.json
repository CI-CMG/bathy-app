{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Pointstore order payload",
  "description": "payload to create a new pointstore request",
  "type": "object",
  "properties": {
    "order_id": {
      "type": "string",
      "description": "internally assigned unique order identifier"
    },
    "bbox": {
          "oneOf": [
            {
              "type": "array",
              "items": {
              	"type": "number"
              },
              "minItems": 4,
              "maxItems": 4
            },
            {
             "type": "string",
              "minLength": 7
            }
           ],
            "description": "list of geographic coordinates in units of decimal degrees. format: minx, miny, maxx, maxy"
        },
    "email": {
      "description": "email address which will receive order notifications",
      "format": "email",
      "type": "string"
    },
    "grid": {
      "type": "object",
      "properties": {
        "resolution": {
          "description": "generated grid cell size in meters",
          "type": "number",
          "minimum": 1,
          "maximum": 1000
        },
        "format": {
          "description": "format code for generated grid",
          "type": "number",
          "minimum": 1,
          "maximum": 111
        }
      },
      "required": [
        "resolution"
      ]
    },
    "datasets": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/dataset"
      }
    }
  },
  "additionalProperties": false,
  "required": [
    "email",
    "bbox"
  ],
  "$defs": {
    "dataset": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "dataset type",
          "enum": [
            "csb",
            "multibeam"
          ]
        },
        "provider": {
          "type": "string",
          "description": "trusted node name. only used for csb"
        },
        "platform": {
          "type": "string",
          "description": "platform, aka ship or vessel name"
        },
        "unique_id": {
          "type": "string",
          "description": "identifier assigned by the provider which should uniquely identify the combination of provider and platform name"
        },
        "collection_date": {
          "type": "string",
          "format": "date",
          "description": "date on which the data were collected. Format: YYYY-MM-DD"
        },
        "archive_date": {
          "type": "string",
          "format": "date",
          "description": "date on which the data were received at the DCDB. Format: YYYY-MM-DD"
        },
        "cruise": {
          "type": "string",
          "description": "cruise on which the data were collected. Only used for multibeam"
        }
      },
      "additionalProperties": false,
      "required": [
        "type"
      ]
    }
  }
}